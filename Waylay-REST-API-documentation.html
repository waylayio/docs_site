<html lang="en">

<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Waylay.io Documentation</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/jquery-ui.css" rel="stylesheet">
    <link href="css/jquery.tocify.css" rel="stylesheet">
    <link href="css/prettify.css" type="text/css" rel="stylesheet" />
    <link href="css/freelancer.css" rel="stylesheet">
    <link rel="icon" type="image/png" href="http://www.waylay.io/favicon.png">
    <link rel="stylesheet" href="css/simplemenu.css">
    </head>

    <body id="page-top" class="index">
        
        
    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top" style="padding: 0;">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
<!--                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>-->
                <a class="navbar-brand" href="http://docs.waylay.io/">docs.waylay.io</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- THIS IS THE MENU --> 

        <div class="mobilenav"> 
  <li><a href="Waylay-REST-API-documentation.html">REST API</a></li> 
  <li><a href="Plugin-API.html">Sensors & Actuators</a></li> 
  <li><a href="Submitting-and-fetching-data.html">Broker & Storage</a></li> 
  <li><a href="Architecture.html">Architecture</a></li> 
  <li><a href="Waylay-starters-guide.html">Starter's Guide</a></li> 

</div> 

        <!-- THIS IS THE ICON --> 

        <a href="javascript:void(0)" class="icon"> 
           <div class="hamburger"> 
             <div class="menui top-menu"></div> 
             <div class="menui mid-menu"></div> 
             <div class="menui bottom-menu"></div> 
           </div> 
        </a>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>
        
        
        
        
        
        
        <div class="container-fluid">
        <div class="row-fluid" style="margin-top: 60px;">
        <div class="col-sm-3" style=" padding-left: 0; margin-left: -15px;">
        <div id="toc" class="tocify"></div>
        
        </div>
            <div class="col-sm-9"><h1 id="api-keys">API keys</h1>
<p>Before you can start using the REST API, you must visit your profile page in the waylay application and fetch your API keys:</p>
<div class="figure">
<img src="https://raw.githubusercontent.com/waylayio/documentation/master/images/profile.png" class="img-responsive"  alt="enter image description here" />
<p class="caption">enter image description here</p>
</div>
<p>Once you have retrieved your keys, you can verify whether your keys and the REST server work E2E by issuing the following command:</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/ping</code></pre>
<p>Note: you can test the same from the UI (see picture above), but since in the rest of the document we will be using curl command, the best is that you at this point in time do the same from the command line.</p>
<hr />
<h2 id="task-related-calls">TASK related calls</h2>
<h3 id="get-information-about-a-single-task">Get information about a single task</h3>
<p>Response will include template definition and task’s type and settings.</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/tasks/{taskID}</code></pre>
<h3 id="task-querying">Task querying</h3>
<p>You can also query more tasks and once using the following command:</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/tasks</code></pre>
<p>This call gives first 10 tasks (default behaviour), and if you need to filter your tasks, you can use a query language as defined below.</p>
<h4 id="task-querying-filtering">Task querying filtering</h4>
<p>Query parameters are:</p>
<ul>
<li>filter (fuzzy search on multiple properties)</li>
<li>name</li>
<li>resource</li>
<li>type (scheduled, periodic, …)</li>
<li>status (running, stopped, failed)</li>
<li>ids (comma separated string)</li>
<li>id (can be added multiple times)</li>
<li>tags (comma separated string)</li>
<li>tag (can be added multiple times)</li>
<li>plugin (<code>mySensor</code> or <code>mySensor:1.0.3</code>)</li>
</ul>
<p><em>All query parameters are combined with logical AND operator</em>. That means that if you combine more than one parameter together you will only receive tasks that match all conditions.</p>
<h5 id="query-by-name">Query by name</h5>
<p>You query task by a name using * characters to get a list of tasks that matches the input string. For instance in this call you can retrieve all tasks that start with <em>taskName</em>.</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/tasks?name=&quot;taskName*&quot; </code></pre>
<p>If you query task by resource, input must match the resource name exactly. You can still receive more tasks in case they all have the same resource name.</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/tasks?resource=&quot;resource1&quot; </code></pre>
<h5 id="task-query-paging">Task query paging</h5>
<p>Related parameters:</p>
<ul>
<li>startIndex</li>
<li>hits (default 10, max. 100)</li>
</ul>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/tasks?startIndex=1</code></pre>
<p>Default number of returned results is 10, and you can change this using <em>hits</em> parameter. For instance, this call will retrieve maximum 50 tasks, starting search from the task index 50. (second page of 50-per-page results)</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/tasks?startIndex=50&amp;hits=50</code></pre>
<h4 id="get-the-total-count">Get the total count</h4>
<p>In order to retrieve the total task count, check the header of the response (X-Count). In this example, we receive back 27 tasks:</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -I https://sandbox.waylay.io/api/tasks
HTTP/1.1 200 OK
Server: nginx/1.6.2
Date: Wed, 07 Jan 2015 10:50:32 GMT
Content-Type: application/json
Content-Length: 0
Connection: keep-alive
X-Count: 27
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST, DELETE, PUT
Access-Control-Allow-Headers: Content-Type, Authorization
Access-Control-Expose-Headers: X-Count
Strict-Transport-Security: max-age=31536000; includeSubdomains</code></pre>
<h4 id="get-the-count-of-running-tasks">Get the count of running tasks</h4>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -I https://sandbox.waylay.io/api/tasks?status=&quot;running&quot;
HTTP/1.1 200 OK
Server: nginx/1.6.2
Date: Wed, 07 Jan 2015 10:50:32 GMT
Content-Type: application/json
Content-Length: 0
Connection: keep-alive
X-Count: 5
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST, DELETE, PUT
Access-Control-Allow-Headers: Content-Type, Authorization
Access-Control-Expose-Headers: X-Count
Strict-Transport-Security: max-age=31536000; includeSubdomains</code></pre>
<h3 id="creating-a-task">Creating a task</h3>
<p>There are mainly 2 ways to create a task, either by specifying the rule in the request, or by specifying the template with which the task needs to be instantiated.</p>
<h4 id="create-a-task-with-rule-defined-in-the-request">Create a task with rule defined in the request</h4>
<p>You can create a task without a need to create a template first. In order to create a task you will need to specify the following in the request:</p>
<ul>
<li>sensors, list of sensors with required properties</li>
<li>actuators, list of actuators with required properties</li>
<li>relations, list of relations(gates) between sensors</li>
<li>triggers, list of conditions under which actuators get executed.</li>
<li>task, task related settings</li>
</ul>
<h5 id="sensor-and-actuator-settings-are">Sensor and actuator settings are:</h5>
<ul>
<li>label , node label</li>
<li>name , sensor/actuator name</li>
<li>version,</li>
<li>position, array such as [245, 205],</li>
<li>properties, key-value object of required properties</li>
<li>resource , resource - applicable only for sensors</li>
<li>sequence , sequence - applicable only for sensors, if omitted default is 1</li>
</ul>
<h5 id="trigger-settings-are">Trigger settings are:</h5>
<ul>
<li>destinationLabel, label of the actuator</li>
<li>sourceLabel, label of the sensor</li>
<li>invocationPolicy, integer number that defines how long to wait before firing the same actuator again, even if the condition is met. statesTrigger, array of states under which to fire the actuator</li>
</ul>
<h5 id="relations-settings-are">Relations settings are:</h5>
<p>Relations express logical gates that can be defined between sensors. There are 3 types of relations: AND, OR and GENERAL.</p>
<ul>
<li>combinations, array of arrays, such as [“Above”, “Above”], [“Below”, “Below”]. Only GENERAL gate will have more than one array of combinations label: “ANDGate_1”</li>
<li>parentLabels, array of labels of sensors that are attached to this relation</li>
<li>position, array such as [245, 205],</li>
<li>type, “AND”, “OR” or “GENERAL”</li>
</ul>
<h5 id="task-settings-are">Task settings are:</h5>
<ul>
<li>name</li>
<li>start, flag to start a task, default yes</li>
<li>type (onetime, cron, reactive, periodic)</li>
<li>other task type related settings, see further below</li>
</ul>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{
  &quot;sensors&quot;: [
    {
      &quot;label&quot;: &quot;currentWeather_1&quot;,
      &quot;name&quot;: &quot;currentWeather&quot;,
      &quot;version&quot;: &quot;1.0.3&quot;,
      &quot;sequence&quot;: 1,
      &quot;properties&quot;: {
        &quot;city&quot;: &quot;Gent, Belgium&quot;
      },
      &quot;position&quot;: [173, 158]
    },
    {
      &quot;label&quot;: &quot;isWeekend_1&quot;,
      &quot;name&quot;: &quot;isWeekend&quot;,
      &quot;version&quot;: &quot;1.0.3&quot;,
      &quot;sequence&quot;: 1,
      &quot;position&quot;: [179, 369]
    }
  ],
  &quot;actuators&quot;: [
    {
      &quot;label&quot;: &quot;TwitterDM_1&quot;,
      &quot;name&quot;: &quot;sendTwitterDM&quot;,
      &quot;version&quot;: &quot;1.0.1&quot;,
      &quot;properties&quot;: {
        &quot;screenName&quot;: &quot;pizuricv&quot;,
        &quot;message&quot;: &quot;Great weekend!&quot;
      },
      &quot;position&quot;: [600, 199]
    }
  ],
  &quot;relations&quot;: [
    {
      &quot;label&quot;: &quot;ANDGate_1&quot;,
      &quot;type&quot;: &quot;AND&quot;,
      &quot;position&quot;: [353, 264],
      &quot;parentLabels&quot;: [&quot;currentWeather_1&quot;, &quot;isWeekend_1&quot;],
      &quot;combinations&quot;: [[&quot;Clear&quot;, &quot;TRUE&quot;]]
    }
  ],
  &quot;triggers&quot;: [
    {
      &quot;destinationLabel&quot;: &quot;TwitterDM_1&quot;,
      &quot;sourceLabel&quot;: &quot;ANDGate_1&quot;,
      &quot;statesTrigger&quot;: [&quot;TRUE&quot;],
      &quot;invocationPolicy&quot;: 1
    }
  ],
  &quot;task&quot;: {
    &quot;type&quot;: &quot;periodic&quot;,
    &quot;start&quot;: true,
    &quot;name&quot;: &quot;Rule created on 12/8/2015, 1:38:56 PM by veselin@waylay.io&quot;,
    &quot;pollingInterval&quot;: 900
  }
}&#39; https://app.waylay.io/api/tasks&#39; https://sandbox.waylay.io/api/tasks</code></pre>
<h4 id="creating-a-task-from-a-template">Creating a task from a template</h4>
<p>In order to start a task from the template, you need to provide the following inputs:</p>
<ul>
<li>name: task name</li>
<li>template: template name</li>
<li>resource: resource name</li>
<li>start: whether task is started after creation</li>
</ul>
<h5 id="cron-task">Cron task</h5>
<p>Cron specific input settings:</p>
<ul>
<li>type : scheduled</li>
<li>cron: cron expression as defined in <a href="http://www.quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontrigger">Cron format</a></li>
</ul>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{
  &quot;name&quot;: &quot;test1&quot;,
  &quot;template&quot;: &quot;internet.json&quot;,
  &quot;resource&quot;: &quot;hello&quot;,
  &quot;start&quot;: false,
  &quot;type&quot;: &quot;scheduled&quot;,
  &quot;cron&quot;: &quot;0/30 * * * * ?&quot;
}&#39; https://sandbox.waylay.io/api/tasks</code></pre>
<h5 id="periodic-task">Periodic task</h5>
<p>Periodic specific input settings:</p>
<ul>
<li>type : periodic</li>
<li>frequency: polling frequency in milliseconds (default 10 seconds)</li>
<li>pollingFixedRate : fixed rate or fixed delay (default fixed false - meaning fixed delay)</li>
<li>resetObservations: whether to clear observation before next invocation (default false)</li>
<li>parallel: whether to run sensors in parallel or sequentially (default true, meaning parallel)</li>
</ul>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{
  &quot;name&quot;: &quot;test2&quot;,
  &quot;template&quot;: &quot;internet.json&quot;,
  &quot;resource&quot;: &quot;hello&quot;,
  &quot;start&quot;: false,
  &quot;type&quot;: &quot;periodic&quot;,
  &quot;frequency&quot;: 1000
}&#39; https://sandbox.waylay.io/api/tasks</code></pre>
<p>Note: in case that you set the task to run sequentially (parallel flag=false), order of sensor’s execution will be based on the cost of the sensor (from lower to higher).</p>
<h5 id="onetime-task">Onetime task</h5>
<p>Onetime specific input settings:</p>
<ul>
<li>type : onetime</li>
</ul>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{
  &quot;name&quot;: &quot;test3&quot;,
  &quot;template&quot;: &quot;internet.json&quot;,
  &quot;resource&quot;: &quot;hello&quot;,
  &quot;type&quot;: &quot;onetime&quot;
}&#39; https://sandbox.waylay.io/api/tasks</code></pre>
<h4 id="creating-a-task-with-sensor-properties-in-the-request"><a name="task_with_props"></a> Creating a task with sensor properties in the request</h4>
<p>You can also override node/sensor/actuator settings of the template before starting the task. These are the fields you can override:</p>
<ul>
<li>nodes.[*].properties.cost (sequence number)</li>
<li>nodes.[*].properties.resource (string)</li>
<li>nodes.[*].properties.evictionTime (millis)</li>
<li>nodes.[*].properties.pollingPeriod (millis)</li>
<li>nodes.[*].properties.pollingFixedRate (boolean)</li>
<li>nodes.[*].properties.sensor.requiredProperties.*</li>
<li>nodes.[*].properties.actions.[*].requiredProperties.*</li>
</ul>
<p>In this example, we change addresses of the <code>Ping</code> sensors and the resource of node <code>Ping_2</code> :</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{
&quot;name&quot;: &quot;test4&quot;, 
&quot;template&quot;: &quot;internet.json&quot;, 
&quot;resource&quot;: &quot;hello&quot;, 
&quot;start&quot;: false, 
&quot;type&quot;: &quot;scheduled&quot;, 
&quot;cron&quot;: &quot;0/30 * * * * ?&quot;, 
&quot;nodes&quot;: [{
  &quot;name&quot;: &quot;Ping_1&quot;, 
  &quot;properties&quot;: {
    &quot;sensor&quot;: {
      &quot;name&quot;: &quot;Ping&quot;, 
      &quot;version&quot;: &quot;1.0.1&quot;, 
      &quot;label&quot;: &quot;Ping_1&quot;, 
      &quot;requiredProperties&quot;: [
        {&quot;address&quot;: &quot;www.waylay.io&quot;} 
      ] 
    } 
  } 
}, {
  &quot;name&quot;: &quot;Ping_2&quot;, 
  &quot;properties&quot;: {
    &quot;resource&quot;: &quot;newresource&quot;
    &quot;sensor&quot;: {
      &quot;name&quot;: &quot;Ping&quot;, 
      &quot;version&quot;: &quot;1.0.1&quot;, 
      &quot;label&quot;: &quot;Ping_2&quot;, 
      &quot;requiredProperties&quot;: [
        {&quot;address&quot;: &quot;sandbox.waylay.io&quot;}
      ] 
    } 
  } 
}]}&#39; https://sandbox.waylay.io/api/tasks</code></pre>
<h4 id="deleting-a-task">Deleting a task</h4>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -X DELETE https://sandbox.waylay.io/api/tasks/1</code></pre>
<h4 id="starting-and-stoping-a-task">Starting and stoping a task</h4>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -X POST https://sandbox.waylay.io/api/tasks/1/command/stop</code></pre>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -X POST https://sandbox.waylay.io/api/tasks/1/command/start</code></pre>
<h3 id="task-node-related-calls">Task Node related calls</h3>
<h4 id="get-current-statesposteriors-and-raw-data-for-the-node">Get current states(posteriors) and raw data for the node</h4>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/tasks/759/nodes/Ping_1</code></pre>
<h4 id="get-supported-states-for-the-node">Get supported states for the node</h4>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/tasks/759/nodes/Ping_1/states</code></pre>
<h4 id="set-the-state-for-the-node">Set the state for the node</h4>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -X POST  -d &#39;state=Alive&#39; https://sandbox.waylay.io/api/tasks/759/nodes/Ping_1</code></pre>
<h4 id="execute-sensor-attached-to-the-node">Execute sensor attached to the node</h4>
<p>At any time you can execute a sensor attached to the node. Please be aware that the state change will be inferred in that task right after the sensor execution. For instance, in this call below, we will execute Ping sensor on the task 759:</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -X POST  -d &#39;operation=start&#39; https://sandbox.waylay.io/api/tasks/759/nodes/Ping_1</code></pre>
<h3 id="batch-operations-on-tasks">Batch operations on tasks</h3>
<p>All the batch operations work with the same filters as querying for tasks, except the <code>filter</code> parameter which is not allowed because it’s not exact.</p>
<h4 id="deleting-multiple-tasks">Deleting multiple tasks</h4>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -X DELETE https://sandbox.waylay.io/api/tasks?ids=1,3,9</code></pre>
<h4 id="modifying-existing-tasks">Modifying existing tasks</h4>
<p>These calls will modify existing tasks in-place. Below an example of what such a request looks like:</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -X PATCH https://sandbox.waylay.io/api/tasks?ids=1,3,9 -H &quot;Content-Type:application/json&quot; -d &#39;{&quot;operation&quot;: &quot;xxx&quot;, ...}&#39;</code></pre>
<h5 id="commands">Commands</h5>
<p>This allows to start or stop a bunch of tasks</p>
<p>The body should look like this</p>
<div class="sourceCode"><pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span>
  <span class="dt">&quot;operation&quot;</span><span class="fu">:</span> <span class="st">&quot;command&quot;</span><span class="fu">,</span>
  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;stop&quot;</span>
<span class="fu">}</span></code></pre></div>
<h5 id="plugin-updates">Plugin updates</h5>
<p>This will apply plugin version updates and re-instantiate the tasks.</p>
<p>The body should look like this (fromVersion can be an exact version or <code>any</code>)</p>
<div class="sourceCode"><pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span>
  <span class="dt">&quot;operation&quot;</span><span class="fu">:</span> <span class="st">&quot;updatePlugins&quot;</span><span class="fu">,</span>
  <span class="dt">&quot;updates&quot;</span><span class="fu">:</span> <span class="ot">[</span>
    <span class="fu">{</span>
      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;myActuator&quot;</span><span class="fu">,</span>
      <span class="dt">&quot;fromVersion&quot;</span><span class="fu">:</span> <span class="st">&quot;1.0.1&quot;</span><span class="fu">,</span>
      <span class="dt">&quot;toVersion&quot;</span><span class="fu">:</span> <span class="st">&quot;1.0.3&quot;</span>
    <span class="fu">}</span><span class="ot">,</span>
    <span class="fu">{</span>
      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;mySensor&quot;</span><span class="fu">,</span>
      <span class="dt">&quot;fromVersion&quot;</span><span class="fu">:</span> <span class="st">&quot;1.1.0&quot;</span><span class="fu">,</span>
      <span class="dt">&quot;toVersion&quot;</span><span class="fu">:</span> <span class="st">&quot;1.3.2&quot;</span>
    <span class="fu">}</span><span class="ot">,</span>
    <span class="fu">{</span>
      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;mySensor&quot;</span><span class="fu">,</span>
      <span class="dt">&quot;fromVersion&quot;</span><span class="fu">:</span> <span class="st">&quot;any&quot;</span><span class="fu">,</span>
      <span class="dt">&quot;toVersion&quot;</span><span class="fu">:</span> <span class="st">&quot;2.0.0&quot;</span>
    <span class="fu">}</span>
  <span class="ot">]</span>
<span class="fu">}</span></code></pre></div>
<p>Note: <em>You are responsible to make sure this new plugin version stays compatible with the old provided properties</em></p>
<p>Note: <em>This is only allowed for tasks that have no linked template. For updating tasks that have been instantiated from a template you have to update the template and restart the tasks</em></p>
<h5 id="reloading-tasks">Reloading tasks</h5>
<p>This is mainly for applying template updates to existing tasks</p>
<div class="sourceCode"><pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span>
  <span class="dt">&quot;operation&quot;</span><span class="fu">:</span> <span class="st">&quot;command&quot;</span><span class="fu">,</span>
  <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;reload&quot;</span>
<span class="fu">}</span></code></pre></div>
<h5 id="modifying-task-properties">Modifying task properties</h5>
<p>This allows you to modify sensor / actuator properties while keeping the task Id.</p>
<p>The format used to modify properties is the same as when you create a <a href="#task_with_props">task from a template</a>. Updates will be merged with any previously provided properties.</p>
<div class="sourceCode"><pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span>
  <span class="dt">&quot;operation&quot;</span> <span class="fu">:</span> <span class="st">&quot;updateProperties&quot;</span><span class="fu">,</span>
  <span class="dt">&quot;nodes&quot;</span> <span class="fu">:</span> <span class="ot">[</span> <span class="fu">{</span>
    <span class="dt">&quot;name&quot;</span> <span class="fu">:</span> <span class="st">&quot;node1&quot;</span><span class="fu">,</span>
    <span class="dt">&quot;properties&quot;</span> <span class="fu">:</span> <span class="fu">{</span>
      <span class="dt">&quot;sensor&quot;</span> <span class="fu">:</span> <span class="fu">{</span>
        <span class="dt">&quot;requiredProperties&quot;</span> <span class="fu">:</span> <span class="ot">[</span> <span class="fu">{</span>
          <span class="dt">&quot;prop1&quot;</span> <span class="fu">:</span> <span class="st">&quot;updatedValue&quot;</span>
        <span class="fu">}</span><span class="ot">,</span> <span class="fu">{</span>
          <span class="dt">&quot;prop1&quot;</span> <span class="fu">:</span> <span class="st">&quot;updatedValue&quot;</span>
        <span class="fu">}</span> <span class="ot">]</span>
      <span class="fu">}</span>
    <span class="fu">}</span>
  <span class="fu">}</span><span class="ot">,</span> <span class="fu">{</span>
    <span class="dt">&quot;name&quot;</span> <span class="fu">:</span> <span class="st">&quot;node2&quot;</span><span class="fu">,</span>
    <span class="dt">&quot;properties&quot;</span> <span class="fu">:</span> <span class="fu">{</span>
      <span class="dt">&quot;actions&quot;</span> <span class="fu">:</span> <span class="ot">[</span> <span class="fu">{</span>
        <span class="dt">&quot;label&quot;</span> <span class="fu">:</span> <span class="st">&quot;actuator1&quot;</span><span class="fu">,</span>
        <span class="dt">&quot;requiredProperties&quot;</span> <span class="fu">:</span> <span class="ot">[</span> <span class="fu">{</span>
          <span class="dt">&quot;prop1&quot;</span> <span class="fu">:</span> <span class="st">&quot;updatedValue&quot;</span>
        <span class="fu">}</span> <span class="ot">]</span>
      <span class="fu">}</span> <span class="ot">]</span>
    <span class="fu">}</span>
  <span class="fu">}</span> <span class="ot">]</span>
<span class="fu">}</span></code></pre></div>
<h2 id="templates">Templates</h2>
<h3 id="list-all-templates">List all templates</h3>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/templates</code></pre>
<h3 id="get-one-template">Get one template</h3>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/templates/internet.json</code></pre>
<h3 id="delete-template">Delete template</h3>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -X DELETE https://sandbox.waylay.io/api/templates/internet.json</code></pre>
<h3 id="submit-a-new-template">Submit a new template</h3>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{ posterior: [ { nodes: [ &quot;CONNECTION&quot;, &quot;Ping_1&quot;, &quot;Ping_2&quot;, &quot;Ping_3&quot; ], function: [ 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0 ] } ], nodes: [ { states: [ &quot;OK&quot;, &quot;NOK&quot; ], name: &quot;CONNECTION&quot;, properties: { position: [ 497, 235 ], comment: &quot;created by waylay&quot;, cost: 1 }, type: &quot;discrete&quot;, mode: &quot;nature&quot; }, { states: [ &quot;Not Alive&quot;, &quot;Alive&quot; ], name: &quot;Ping_1&quot;, properties: { position: [ 214, 317 ], comment: &quot;created by waylay&quot;, cost: 1, sensor: { name: &quot;Ping&quot;, version: &quot;1.0.1&quot;, label: &quot;Ping_1&quot;, requiredProperties: [ { address: &quot;www.google.com&quot; } ] } }, type: &quot;discrete&quot;, mode: &quot;nature&quot;, priors: [ 0.5, 0.5 ] }, { states: [ &quot;Not Alive&quot;, &quot;Alive&quot; ], name: &quot;Ping_2&quot;, properties: { position: [ 144, 163 ], comment: &quot;created by waylay&quot;, cost: 1, sensor: { name: &quot;Ping&quot;, version: &quot;1.0.1&quot;, label: &quot;Ping_2&quot;, requiredProperties: [ { address: &quot;www.waylay.io&quot; } ] } }, type: &quot;discrete&quot;, mode: &quot;nature&quot;, priors: [ 0.5, 0.5 ] }, { states: [ &quot;Not Alive&quot;, &quot;Alive&quot; ], name: &quot;Ping_3&quot;, properties: { position: [ 359, 62 ], comment: &quot;created by waylay&quot;, cost: 1, sensor: { name: &quot;Ping&quot;, version: &quot;1.0.1&quot;, label: &quot;Ping_3&quot;, requiredProperties: [ { address: &quot;www.yahoo.com&quot; } ] } }, type: &quot;discrete&quot;, mode: &quot;nature&quot;, priors: [ 0.5, 0.5 ] } ], name: &quot;internet2.json&quot; }&#39; https://sandbox.waylay.io/api/templates</code></pre>
<h2 id="plugs">Plugs</h2>
<h3 id="sensors">Sensors</h3>
<h4 id="get-list-of-all-sensors">Get list of all sensors</h4>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/sensors</code></pre>
<h4 id="execute-sensor">Execute sensor</h4>
<p>You can test any sensor using REST. Of course, you will need to provide sensor specific parameters in the call, like in this example where we provide city name to the weather sensor:</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{properties: {&quot;city&quot; : &quot;Gent&quot;}}&#39; https://sandbox.waylay.io/api/sensors/weatherSensor/versions/1.0.1</code></pre>
<h3 id="actuators">Actuators</h3>
<h4 id="get-list-of-all-actuators">Get list of all actuators</h4>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/actions</code></pre>
<h4 id="execute-actuator">Execute actuator</h4>
<p>You can test any actuator using REST. Of course, you will need to provide actuator specific parameters in the call, like in this example where we provide e-mail address and message to mail actuator:</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{properties: {&quot;address&quot; : &quot;veselin@waylay.io&quot;, &quot;subject&quot;:&quot;test&quot;, &quot;message&quot;: &quot;hello world&quot;}}&#39; https://sandbox.waylay.io/api/actions/Mail/versions/1.0.1</code></pre>
<h2 id="provisioning-api">Provisioning API</h2>
<p>Provisioning API allows you to associate metadata with resource. Resources are either discovered by Waylay (as soon as data is pushed towards Waylay Broker) or you can as well create them using REST call. Next to the resource CRUD related calls, waylay also allows you to create ResourceType entities, and let you link resource to a type using metadata (please see example below). As soon as a resource is linked to a resource type, all metadata values of that type are linked to that resource. Resource can still overwrite any specific attribute in its metadata model. Let’s see how this work in practise:</p>
<h3 id="resource-based-api-calls">Resource based API calls</h3>
<h4 id="create-resource">Create resource</h4>
<p>In this example, we create a resource <em>mydevice_id</em> and add two additional attributes: <em>tenant</em> and <em>label</em>:</p>
<pre><code>curl -i --user apiKey:apiSecret -H &quot;Content-Type: application/json&quot; -X POST \
    -d &#39;{&quot;id&quot;:&quot;mydevice_id&quot;, &quot;tenant&quot;:&quot;tenant1&quot;, &quot;label&quot;: &quot;helloWorld&quot;}&#39; \
    https://sandbox.waylay.io/api/resources</code></pre>
<h5 id="reserved-keywords-for-metadata">Reserved keywords for metadata:</h5>
<table style="width:17%;">
<colgroup>
<col width="5%" />
<col width="5%" />
<col width="5%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Symbol</th>
<th align="left">Type</th>
<th align="left">Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">resourceTypeId</td>
<td align="left">optional[String]</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">name</td>
<td align="left">optional[String]</td>
<td align="left">name of the resource, like testresource</td>
</tr>
<tr class="odd">
<td align="left">provider</td>
<td align="left">optional[String]</td>
<td align="left">LoRA, Sigfox..</td>
</tr>
<tr class="even">
<td align="left">providerId</td>
<td align="left">optional[String]</td>
<td align="left">provder_123</td>
</tr>
<tr class="odd">
<td align="left">tenant</td>
<td align="left">optional[String]</td>
<td align="left">customer tenant name</td>
</tr>
<tr class="even">
<td align="left">tags</td>
<td align="left">optional[List[String]]</td>
<td align="left">(sequence of strings) // example [“Proximus”, “myTag”, “locationC”]</td>
</tr>
<tr class="odd">
<td align="left">location</td>
<td align="left">optional [Location type]</td>
<td align="left">see below</td>
</tr>
<tr class="even">
<td align="left">firmware</td>
<td align="left">optional[String]</td>
<td align="left">1.2_1234</td>
</tr>
<tr class="odd">
<td align="left">lastMessageTimestamp</td>
<td align="left">optional[Integer]</td>
<td align="left">(epoch time of the last contact)</td>
</tr>
<tr class="even">
<td align="left">metrics</td>
<td align="left">optional[list[ResourceMetric]]</td>
<td align="left">see below</td>
</tr>
</tbody>
</table>
<p>Example of creating a resource and immediately linking it to the resource type:</p>
<pre><code>curl -i --user apiKey:apiSecret -H &quot;Content-Type: application/json&quot; -X POST \
    -d &#39;{&quot;id&quot;:&quot;myDevice_id&quot;, &quot;resourceTypeId&quot;:&quot;resourceType_Id&quot;, &quot;tenant&quot;:&quot;tenant1&quot;, &quot;name&quot;: &quot;helloWorld&quot;}&#39; \
    https://sandbox.waylay.io/api/resources</code></pre>
<h5 id="reserved-keywords-for-location-type">Reserved keywords for Location type:</h5>
<table>
<thead>
<tr class="header">
<th align="left">Symbol</th>
<th align="left">Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">lat</td>
<td align="left">Double</td>
</tr>
<tr class="even">
<td align="left">lon</td>
<td align="left">Double</td>
</tr>
</tbody>
</table>
<h5 id="reserved-keywords-for-resourcemetric">Reserved keywords for ResourceMetric:</h5>
<table style="width:17%;">
<colgroup>
<col width="5%" />
<col width="5%" />
<col width="5%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Symbol</th>
<th align="left">Type</th>
<th align="left">Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">name</td>
<td align="left">String</td>
<td align="left">Temperature</td>
</tr>
<tr class="even">
<td align="left">valueType</td>
<td align="left">String</td>
<td align="left">integer, double, boolean, string, enum</td>
</tr>
<tr class="odd">
<td align="left">valueChoices</td>
<td align="left">optional[list[String]]</td>
<td align="left">[“OK”, “NOK”]</td>
</tr>
<tr class="even">
<td align="left">metricType</td>
<td align="left">String</td>
<td align="left">count / gauge / counter / timestamp (for events) <em>default gauge</em></td>
</tr>
<tr class="odd">
<td align="left">unit</td>
<td align="left">optional[String]</td>
<td align="left">SI units or non-SI units like Fahrenheit…</td>
</tr>
<tr class="even">
<td align="left">maximum</td>
<td align="left">optional[Double]</td>
<td align="left">0</td>
</tr>
<tr class="odd">
<td align="left">minimum</td>
<td align="left">optional[Double]</td>
<td align="left">60</td>
</tr>
</tbody>
</table>
<h5 id="reserved-keywords-for-metric-type">Reserved keywords for Metric type:</h5>
<table style="width:11%;">
<colgroup>
<col width="5%" />
<col width="5%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Symbol</th>
<th align="left">Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">rate</td>
<td align="left">a number per second (implies that unit ends on ‘/s’)</td>
</tr>
<tr class="even">
<td align="left">count</td>
<td align="left">a number per a given interval (such as a statsd flushInterval)</td>
</tr>
<tr class="odd">
<td align="left">gauge</td>
<td align="left">values at each point in time</td>
</tr>
<tr class="even">
<td align="left">counter</td>
<td align="left">keeps increasing over time (but might wrap/reset at some point) i.e. a gauge with the added notion of “i usually want to derive this to see the rate”</td>
</tr>
<tr class="odd">
<td align="left">timestamp</td>
<td align="left">value represents a unix timestamp. so basically a gauge or counter but we know we can also render the “age” at each point.</td>
</tr>
</tbody>
</table>
<p>More about metric types you can find here <a href="http://metrics20.org/spec/">metric20org</a></p>
<p>Example of creating a resource with a metric:</p>
<pre><code>curl -i --user apiKey:apiSecret -H &quot;Content-Type: application/json&quot; -X POST \
-d &#39;{&quot;id&quot;:&quot;mydevice_id3&quot;, &quot;tenant&quot;:&quot;tenant1&quot;, &quot;label&quot;:&quot;helloWorld&quot;, &quot;metrics&quot; : [{&quot;name&quot; :&quot;Temperature&quot;, &quot;unit&quot;:&quot;C&quot;, &quot;valueType&quot;: &quot;double&quot;, &quot;metricType&quot;: &quot;counter&quot; }]}&#39; \
https://sandbox.waylay.io/api/resources</code></pre>
<p>Example of creating a resource with location:</p>
<pre><code>curl -i --user apiKey:apiSecret -H &quot;Content-Type: application/json&quot; -X POST \
-d &#39;{&quot;id&quot;:&quot;mydevice_id4&quot;, &quot;tenant&quot;:&quot;tenant1&quot;, &quot;label&quot;:&quot;helloWorld&quot;, &quot;location&quot; : {&quot;lat&quot; : 51, &quot;lon&quot;:  3.71 }}&#39; \
https://sandbox.waylay.io/api/resources</code></pre>
<h4 id="update-resource">Update resource</h4>
<p>In order to update a resource, you need to put your resource Id in the path as in the example below:</p>
<pre><code>curl -i --user apiKey:apiSecret -H &quot;Content-Type: application/json&quot; -X PUT \
    -d &#39;{&quot;resourceTypeId&quot;:&quot;resourceType_Id&quot;, &quot;tenant&quot;:&quot;tenant1&quot;, &quot;name&quot;: &quot;helloWorld&quot;}&#39; \
    https://sandbox.waylay.io/api/resources/myDevice_id</code></pre>
<h4 id="partial-update-resource">Partial update resource</h4>
<p>Partial updates allow you to add/modify individual fields on a resource.</p>
<pre><code>curl -i --user apiKey:apiSecret -H &quot;Content-Type: application/json&quot; -X PATCH \
    -d &#39;{&quot;resourceTypeId&quot;:&quot;resourceType_Id&quot;}&#39; \
    https://sandbox.waylay.io/api/resources/myDevice_id</code></pre>
<p><em>note: This call also allows you to do upserts, if the resource for the provided id does not exist it will be created</em></p>
<h4 id="delete-resource">Delete resource</h4>
<p>In order to delete a resource, you need to put your resource Id in the path as in the example below:</p>
<pre><code>curl -i --user apiKey:apiSecret -H &quot;Content-Type: application/json&quot; -X DELETE \
    https://sandbox.waylay.io/api/resources/mydevice_id</code></pre>
<h4 id="retrieve-resource">Retrieve resource</h4>
<p>In order to get a resource, you need to put your resource Id in the path as in the example below:</p>
<pre><code>curl -i --user apiKey:apiSecret https://sandbox.waylay.io/api/resources/mydevice_id</code></pre>
<h3 id="resource-type-based-api-calls">Resource type based API calls</h3>
<h4 id="create-resource-type">Create resource type</h4>
<p>In this example, we create a resource type and at the same time, we define metric types:</p>
<pre><code>curl -i --user apiKey:apiSecret -H &quot;Content-Type: application/json&quot; -X POST \
  -d &#39;{&quot;id&quot;:&quot;resourceType_Id&quot;, &quot;customeField&quot;:&quot;value&quot;, &quot;metrics&quot; : [{&quot;name&quot; :&quot;Temperature&quot;, &quot;unit&quot;:&quot;C&quot;, &quot;valueType&quot;: &quot;double&quot;, &quot;metricType&quot;: &quot;counter&quot; }]}&#39; \
   https://sandbox.waylay.io/api/resourcetypes</code></pre>
<h5 id="reserved-keywords-for-resource-type">Reserved keywords for resource type:</h5>
<table>
<thead>
<tr class="header">
<th align="left">Symbol</th>
<th align="left">Type</th>
<th align="left">Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">id</td>
<td align="left">String</td>
<td align="left">D12345 or UUID</td>
</tr>
<tr class="even">
<td align="left">name</td>
<td align="left">Option[String]</td>
<td align="left">device_123</td>
</tr>
<tr class="odd">
<td align="left">provider</td>
<td align="left">optional[String]</td>
<td align="left">Proximus</td>
</tr>
<tr class="even">
<td align="left">providerId</td>
<td align="left">optional[String]</td>
<td align="left">123</td>
</tr>
<tr class="odd">
<td align="left">tenant</td>
<td align="left">optional[String]</td>
<td align="left">customer1</td>
</tr>
<tr class="even">
<td align="left">metrics</td>
<td align="left">optional[List[ResourceMetric]]</td>
<td align="left">list of metrics, see below</td>
</tr>
</tbody>
</table>
<h4 id="delete-resource-type">Delete resource type</h4>
<p>Similarly, in order to delete a resource type:</p>
<pre><code>curl -i --user apiKey:apiSecret -H &quot;Content-Type: application/json&quot; -X DELETE \
   https://sandbox.waylay.io/api/resourcetypes/resourceType_Id</code></pre>
<h4 id="retrieve-resource-type">Retrieve resource type</h4>
<p>In order to get a resource type, you need to put your resource type Id in the path as in the example below:</p>
<pre><code>curl -i --user apiKey:apiSecret https://sandbox.waylay.io/api/resourcestypes/resourceType_Id</code></pre>
<h2 id="how-to-work-with-real-time-stream-data">How to work with real-time (STREAM) data</h2>
<p>The waylay application allows you to push raw data and states to the running tasks. Normally this is done via WaylayBroker which allows you to terminate many different protocols (MQTT, WebSockets and REST), but if you wish, you can as well do it directly, calling STREAM related API call on the engine itself.</p>
<h3 id="push-real-time-raw-data">Push real-time raw data</h3>
<p>If you need to process real time data in your sensors (like location, temperature etc.), you have two options:</p>
<ul>
<li>use configuration property (see the interface spec) and fetch the data at runtime in the execute call</li>
<li>ask the framework to provide you with real time data and fetch the data from the task context (during the execution call of the sensor).</li>
</ul>
<p>In case that real time data is provided to the sensors via the context (option 2), the plugin developer has put the responsibility of providing the real time data to the person that implements the REST call. That person could e.g. implement an MQTT to REST bridge to accomplish this. When making use of this REST call, you must use the resource parameter as the identifier of your device (or any other “thing”). This is the same resource identifier that is associated with the task when you create it. In this way, the waylay framework can link the pushed raw data and the tasks(and sensors) that require this data.</p>
<p>When tasks gets invoked, the framework will provide the pushed raw data to all tasks (and the sensors) that match the resource identifier. You can create as many tasks as you want using the same resource identifier. Here is a REST invocation call that pushes temperature:</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{
        resource: &quot;home_X_room1&quot;,
        data:{
          object:&quot;home_X_room1&quot;,
          type: {
            unit:&quot;C&quot;,
            dataType:&quot;double&quot;,
            collectedType: &quot;instant&quot;
          },
          parameterName: &quot;temperature&quot;,
          value: 23.0,
          collectedTime: 1420629467,
          validPeriodSecs:600
        }
      }&#39; https://sandbox.waylay.io/api/data</code></pre>
<p>Here is the app view where you can test this feature(designer in debug mode): <img src="https://raw.githubusercontent.com/waylayio/documentation/master/images/global.png" class="img-responsive"  /></p>
<p>You can also push several parameters at once, and you can as well skip most of the parameter’s attributes. For instance, with this call, we are pushing geolocation to the waylay platform, by specifying only longitude and latitude values. By default, waylay puts the <em>validPeriodSecs</em> of the parameter to 60 seconds, and <em>collectedTime</em> to the time the data was received:</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{ resource: &quot;datasource&quot;,  data: [{ parameterName: &quot;latitude&quot;, value: 51}, { parameterName: &quot;longitude&quot;, value: 3.73}] }&#39; https://sandbox.waylay.io/api/data</code></pre>
<p>For more information please check <em>Plugin SDK document</em>.</p>
<h3 id="pushing-states-to-the-task">Pushing states to the task</h3>
<p>For example, if you have a door with two states OPEN/CLOSED, you can push a state change from an external system to the task. There are 2 ways to do this:</p>
<ol style="list-style-type: decimal">
<li>You can inject the state directly to the particular node in the task (as described before in the node section):</li>
</ol>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt;  --data &quot;state=OPEN&quot; -X POST https://sandbox.waylay.io/api/tasks/4/nodes/Door</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>By specifying a resource name, as shown below (in which case waylay will push the state change to all tasks that have a node Door and a resource name that matches the one in the request):</li>
</ol>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{
        resource: &quot;room_1&quot;,
        nodes: [ {node:&quot;Door&quot;, state: &quot;OPEN&quot;}]
      }&#39; https://sandbox.waylay.io/api/data</code></pre>
<h2 id="bucket">Bucket</h2>
<p>With bucket feature you can associate a task with a resource and keep it as an item in the bucket till you want to invoke it (by resource name). You can have multiple bucket items for the same resource, and all items that match that particular resource will be invoked.</p>
<h3 id="start-bucket-items-for-resource">Start bucket item(s) for resource</h3>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -X POST -d &#39;{}&#39; -H &quot;Content-Type:application/json&quot; https://sanbox.waylay.io/api/bucket/resources/{resource}</code></pre>
<h3 id="get-bucket-item">Get bucket item</h3>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/bucket/items/1</code></pre>
<h3 id="delete-bucket-item">Delete bucket item</h3>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt;  -X DELETE  https://sandbox.waylay.io/api/bucket/items/1</code></pre>
<h3 id="create-bucket-item">Create bucket item</h3>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{&quot;name&quot;: &quot;test4&quot;, &quot;template&quot;: &quot;internet.json&quot;, &quot;resource&quot;: &quot;hello&quot;, &quot;start&quot;: false, &quot;type&quot;: &quot;scheduled&quot;, &quot;cron&quot;: &quot;0/30 * * * * ?&quot;, &quot;nodes&quot;: [{&quot;name&quot;: &quot;Ping_1&quot;, &quot;properties&quot;: {&quot;sensor&quot;: {&quot;name&quot;: &quot;Ping&quot;, &quot;version&quot;: &quot;1.0.1&quot;, &quot;label&quot;: &quot;Ping_1&quot;, &quot;requiredProperties&quot;: [{&quot;address&quot;: &quot;www.waylay.io&quot;} ] } } }, {&quot;name&quot;: &quot;Ping_2&quot;, &quot;properties&quot;: {&quot;sensor&quot;: {&quot;name&quot;: &quot;Ping&quot;, &quot;version&quot;: &quot;1.0.1&quot;, &quot;label&quot;: &quot;Ping_2&quot;, &quot;requiredProperties&quot;: [{&quot;address&quot;: &quot;sandbox.waylay.io&quot;} ] } } }, {&quot;name&quot;: &quot;Ping_3&quot;, &quot;properties&quot;: {&quot;sensor&quot;: {&quot;name&quot;: &quot;Ping&quot;, &quot;version&quot;: &quot;1.0.1&quot;, &quot;label&quot;: &quot;Ping_3&quot;, &quot;requiredProperties&quot;: [{&quot;address&quot;: &quot;www.google.com&quot;} ] } } } ] }&#39; https://sandbox.waylay.io/api/bucket/items</code></pre>
<a href="#" class="scrollup"><a href="http://docs.waylay.io/"></a></a>

</div>
        </div>
                </div>
     <footer class="text-center">

        <div class="footer-below">
            <div class="container">
                <div class="row">
                    <div class="col-xs-9 pull-right">
                        Copyright &copy; waylay.io 2015
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <script src="js/jquery-1.11.2.min.js"></script>
    <script src="js/jquery-ui-1.9.1.custom.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.tocify.min.js"></script>
    <script src="js/prettify.js"></script>
    <script src="js/tinynav.min.js"></script>
    <script src="js/freelancer.js"></script>
    <script src="js/simplemenu.js"> </script> 
</body>

</html>

